<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Опавшие листья</title>
    <description>О программировании, науке и не только.
</description>
    <link>https://v-kolesnikov.github.io/blog/</link>
    <atom:link href="https://v-kolesnikov.github.io/blog/feed.xml" rel="self" type="application/rss+xml" />
    <pubDate>Mon, 17 Oct 2016 23:19:42 +0300</pubDate>
    <lastBuildDate>Mon, 17 Oct 2016 23:19:42 +0300</lastBuildDate>
    <generator>Jekyll v2.4.0</generator>
    
      <item>
        <title>Время и тесты</title>
        <description>&lt;p&gt;Работая над одним большим и старым проектом, однажды ночью я отправил в репозиторий коммит, и уже собираясь закончить работу зашел посмотреть статус коммита на CI-сервере. Коммит был небольшой, и на первый взгляд просто не мог ничего сломать. Но большим был проект, а количество нарушенных в нём архитектурных принципов было столь велико, что надеяться на удачу не приходилось. Тесты шли около 10 минут, и… Не прошли! Интересно. Упавшие тесты относились к подсистеме биллинга, и содержали утверждения относительно дат окончания оплаченных тарифов. Я не работал с этой частью системы раньше (и позже тоже), и не знал её особенностей - пытаться разобраться в исходниках казалось плохой идеей. Переключился на мастер и запустил тесты биллинга - не прошли. Закралась мысль об особенностях конфигурации локальной машины и её отличиях от production и testing окружений. Зашел на тестовый сервер и вручную запустил сборку мастер ветки. Последняя дневная сборка была успешной. 5, 7, 10 минут, не прошли! Сборка упала на тех же самых тестах, при этом этот же код успешно проходил все тесты днём ранее. Выглядело всё это странно и ничего не оставалось, кроме как погрузиться в детальное изучение возникавшей во время теста ошибки. Ошибка гласила что ожидаема дата отличается от актуального значения на 1 день. Где даты и время - там проблемы работы с часовыми поясами. Утром коллеги с улыбкой поведали о том, что эти тесты &lt;em&gt;всегда падают ночью&lt;/em&gt; и что об этом не стоит беспокоится. Действительно, перезапустив ту же самую сборку, которую я запустил ночью, я убедился в том что все тесты прошли успешно.&lt;/p&gt;

&lt;p&gt;В чём же ошибка?&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/article_images/2016-10-17-time-and-tests/time_assert.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Представьте себе что у вас есть временная метка - запись о дате и времени чего-либо. Например истечения срока действия пробного периода вашего продукта. Дата может быть записана так (формат ISO 8601): &lt;code&gt;2016-10-17T01:30:00+03:00&lt;/code&gt;. Данная запись содержит в себе информацию о часовом поясе - &lt;code&gt;+03:00&lt;/code&gt;, т.е. половина второго ночи будет в часовом поясе +03. Тоже самое время по Гринвичу будет: &lt;code&gt;2016-10-16T22:30:00+00:00&lt;/code&gt; - вчерашнее относительно исходного времени, но - то же самое. В связи с этим нужно быть аккуратным при извлечении даты из временной метки, как видно - в данном случае они могут быть разными, в зависимости от того в каком формате представлена временная метка.&lt;/p&gt;

&lt;p&gt;Почему я вспомнил об этом эпизоде сейчас? Потому что встретил его очередном проекте в том же самом виде, что говорит о системности подобной ошибки.&lt;/p&gt;

&lt;p&gt;Пишите тесты и &lt;em&gt;спокойной&lt;/em&gt; вам ночи!)&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/article_images/2016-10-17-time-and-tests/IMG_20161017_011737.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

</description>
        <pubDate>Mon, 17 Oct 2016 00:00:00 +0300</pubDate>
        <link>https://v-kolesnikov.github.io/blog/programming/2016/10/17/time-and-tests.html</link>
        <guid isPermaLink="true">https://v-kolesnikov.github.io/blog/programming/2016/10/17/time-and-tests.html</guid>
        
        <category>engineering,</category>
        
        <category>ruby,</category>
        
        <category>date-time</category>
        
        
        <category>programming</category>
        
      </item>
    
      <item>
        <title>Как сдвинуть гору Фудзи?</title>
        <description>&lt;p&gt;Прочитал книгу “Как сдвинуть гору Фудзи?” Уильяма Паудсона. В книге даётся обзор истории увлечения человечества загадками и головоломками и их проникновения в корпоротивную культуру многих крупных и не очень компаний по всему миру. В начале книги изложена краткая история теста IQ, его изобретения, популярности и разоблачения. Рассказывается о некоторых психологических исследованиях посвященных теме проведения интервью. Большая часть книги посвящена опыту применения головоломок и “вопросов без ответов” на собеседованиях в компании Microsoft. Рассказываются истории возникновения некоторых популярных головоломок: круглые люки, конфеты m&amp;amp;m и т.п. В практической части речь идёт о психологогических и психофизических барьерах, которые мешают большинству людей находить решения головоломок и считать их бессмысленными, даются общие рекомендации к решению таких задач. В конце книги даются некоторые советы по проведению интервью для интервьювера, а также список ответов на упоминаемые в тексте книги задачи.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/article_images/2016-03-16-how-would-you-move-mount-fuji/cover.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

</description>
        <pubDate>Wed, 16 Mar 2016 00:00:00 +0300</pubDate>
        <link>https://v-kolesnikov.github.io/blog/books/2016/03/16/how-would-you-move-mount-fuji.html</link>
        <guid isPermaLink="true">https://v-kolesnikov.github.io/blog/books/2016/03/16/how-would-you-move-mount-fuji.html</guid>
        
        <category>books,</category>
        
        <category>problems</category>
        
        
        <category>books</category>
        
      </item>
    
      <item>
        <title>Угол между стрелками часов</title>
        <description>&lt;p&gt;Какой угол составляют часовая и минутная стрелка в 3 часа 15 минут?
Давайте взглянем на часы:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/article_images/2016-03-08-clock-angle-problem/clock_even_hours.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Циферблат представляет собой окружность, разделенную часовыми делениями на &lt;script type=&quot;math/tex&quot;&gt;12&lt;/script&gt; частей и на &lt;script type=&quot;math/tex&quot;&gt;60&lt;/script&gt; частей - минутными. Полный оборот стрелки (минутной или часовой) от начальной оси (вертикальной линии проходящей через центр циферблата, &lt;script type=&quot;math/tex&quot;&gt;6&lt;/script&gt; и &lt;script type=&quot;math/tex&quot;&gt;12&lt;/script&gt; часов) составляет угол в &lt;script type=&quot;math/tex&quot;&gt;360^\circ&lt;/script&gt;. Один час составляет &lt;script type=&quot;math/tex&quot;&gt;\dfrac {1} {12}&lt;/script&gt; часть окружности, т.е. &lt;script type=&quot;math/tex&quot;&gt;\dfrac {360^\circ} {12} = 30^\circ&lt;/script&gt;, а одна минута - &lt;script type=&quot;math/tex&quot;&gt;\dfrac {1} {60}&lt;/script&gt; часть, т.е. &lt;script type=&quot;math/tex&quot;&gt;\dfrac {360^\circ} {60} = 6^\circ&lt;/script&gt;&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;Таким образом, угол между часовой и минутной стрелкой в &lt;script type=&quot;math/tex&quot;&gt;0&lt;/script&gt; минут каждого часа (&lt;script type=&quot;math/tex&quot;&gt;h&lt;/script&gt;) равен &lt;script type=&quot;math/tex&quot;&gt;30^\circ * h&lt;/script&gt;. Для трех часов (&lt;script type=&quot;math/tex&quot;&gt;h = 3&lt;/script&gt;) на рисунке выше, видим, что это равно &lt;script type=&quot;math/tex&quot;&gt;30 * 3 = 90^\circ&lt;/script&gt;, а для шести часов - &lt;script type=&quot;math/tex&quot;&gt;30 * 6 = 180^\circ&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;Теперь давайте понаблюдаем за движением минутной стрелки от трёх часов ровно до пятнадцати минут четвертого:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/article_images/2016-03-08-clock-angle-problem/clock_15-00-to-15-15.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;В начальный момент (&lt;script type=&quot;math/tex&quot;&gt;3:00&lt;/script&gt;) угол между стрелками составляет &lt;script type=&quot;math/tex&quot;&gt;90^\circ&lt;/script&gt;, за пять минут минутная стрелка отклонится на &lt;script type=&quot;math/tex&quot;&gt;6^\circ * 5 = 30^\circ&lt;/script&gt; от начального положения, за &lt;script type=&quot;math/tex&quot;&gt;10&lt;/script&gt; минут - на &lt;script type=&quot;math/tex&quot;&gt;6^\circ * 10 = 60^\circ&lt;/script&gt;, а за &lt;script type=&quot;math/tex&quot;&gt;15&lt;/script&gt; минут - на &lt;script type=&quot;math/tex&quot;&gt;6^\circ * 15 = 90^\circ&lt;/script&gt;.&lt;/p&gt;

&lt;p&gt;Должна ли в этот момент (&lt;script type=&quot;math/tex&quot;&gt;3:15&lt;/script&gt;) минутная стрелка совпасть с часовой? Нет, потому что движение минутной стрелки также влияет и на часовую стрелку. Пятнадцать минут пройденные минутной стрелкой, являются четвертью часа, и часовая стрелка также пройдет эту четверть часа: &lt;script type=&quot;math/tex&quot;&gt;\dfrac {30^\circ} {4} = 7.5^\circ&lt;/script&gt;. Таким образом, угол между часовой и минутной стрелкой в &lt;script type=&quot;math/tex&quot;&gt;3&lt;/script&gt; часа и &lt;script type=&quot;math/tex&quot;&gt;15&lt;/script&gt; минут будет составлять разницу между углом составленным часовой стрелкой с начальной осью и углом составленным минутной стрелкой с начальной осью: &lt;script type=&quot;math/tex&quot;&gt;90^\circ + 7.5^\circ - 90^\circ = 7.5^\circ&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;В общем виде, можно записать формулу так: &lt;script type=&quot;math/tex&quot;&gt;\alpha = 30^\circ * h + 0.5 * m - 6^\circ * m&lt;/script&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;script type=&quot;math/tex&quot;&gt;\alpha&lt;/script&gt; - угол между часовой и минутной стрелкой&lt;/li&gt;
  &lt;li&gt;&lt;script type=&quot;math/tex&quot;&gt;h&lt;/script&gt; - часы&lt;/li&gt;
  &lt;li&gt;&lt;script type=&quot;math/tex&quot;&gt;m&lt;/script&gt; - минуты&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Tue, 08 Mar 2016 00:00:00 +0300</pubDate>
        <link>https://v-kolesnikov.github.io/blog/problems/2016/03/08/clock-angle-problem.html</link>
        <guid isPermaLink="true">https://v-kolesnikov.github.io/blog/problems/2016/03/08/clock-angle-problem.html</guid>
        
        <category>problems</category>
        
        
        <category>problems</category>
        
      </item>
    
      <item>
        <title>Книги 2015</title>
        <description>&lt;p&gt;Прочитанное в 2015 году:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Роберт К.Мартин. Идеальный программист. Как стать профессионалом разработки ПО&lt;/li&gt;
  &lt;li&gt;Роберт К.Мартин. Чистый код. Создание, анализ и рефакторинг. Библиотека программиста&lt;/li&gt;
  &lt;li&gt;Джоэл Спольски. Джоэл о программировании&lt;/li&gt;
  &lt;li&gt;Джоэл Спольски. Джоэл. И снова о программировании&lt;/li&gt;
  &lt;li&gt;Эрик Эванс. Предметно-ориентированное проектирование (DDD): структуризация сложных программных систем&lt;/li&gt;
  &lt;li&gt;Мартин Фаулер. Рефакторинг: улучшение существующего кода&lt;/li&gt;
  &lt;li&gt;Чарльз Петцольд. Код&lt;/li&gt;
  &lt;li&gt;Харольд Абельсон, Джеральд Джей Сассман. Структура и Интерпретация Компьютерных Программ&lt;/li&gt;
  &lt;li&gt;Хэл Фултон, Андре Арко. Путь Ruby&lt;/li&gt;
  &lt;li&gt;Элия М. Гольдратт, Джеф Кокс. Цель. Процесс непрерывного совершенствования&lt;/li&gt;
  &lt;li&gt;Джин Ким, Кевин Бер, Джордж Спаффорд. Проект “Феникс”. Роман о том, как DevOps меняет бизнес к лучшему&lt;/li&gt;
  &lt;li&gt;Ричард Фейнман. Вы, конечно, шутите, мистер Фейнман!&lt;/li&gt;
  &lt;li&gt;Swaroop C.H. A byte of Python. v2.01.&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Tue, 08 Mar 2016 00:00:00 +0300</pubDate>
        <link>https://v-kolesnikov.github.io/blog/books/2016/03/08/books-2015.html</link>
        <guid isPermaLink="true">https://v-kolesnikov.github.io/blog/books/2016/03/08/books-2015.html</guid>
        
        <category>books</category>
        
        
        <category>books</category>
        
      </item>
    
  </channel>
</rss>
